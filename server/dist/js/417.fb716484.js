"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[417],{5724:function(e,a,r){r.d(a,{A:function(){return w}});r(8992),r(2577);var t=r(6768),o=r(144),i=r(5130),s=r(4232),l=r(8238),n=r(8294),c=r(6807);const u={class:"add-item-form-container"},d={class:"form-title"},p={class:"add-item-form"},m={class:"form-group"},f={class:"err"},_={class:"form-group"},g={class:"err"},b={class:"form-group"},y={class:"form-group"},k={class:"err"},v={key:0,class:"form-group"},L={class:"err"},R={class:"form-group"},h={class:"err"},I={class:"form-group"};var A={__name:"AddItems",setup(e){const a=(0,l.j)(),r=(0,n.e)();let A=(0,o.KR)(null),C=(0,o.KR)(""),S=(0,o.Kh)({name:"",price:"",description:"",category:"",sub_category:""}),w=(0,o.Kh)({name_err:"",price_err:"",description_err:"",category_err:"",sub_category_err:"",image_err:""});function x(){let e=/^[A-Za-z\s]+$/;if(""===S.name)w.name_err="Please fill the field";else{if(e.test(S.name))return w.name_err="",!0;w.name_err="Item name can only contain letters and spaces"}}function E(){if(""!==S.price)return w.price_err="",!0;w.price_err="Please fill field"}function F(){if(""!==S.category&&"Select Category"!=S.category)return"africana"!==S.category?(S.sub_category="none",w.category_err="",!0):(w.category_err="",!0);w.category_err="Please fill field"}function q(){if(""!==S.sub_category&&"Select Sub Category"!=S.sub_category)return w.sub_category_err="",!0;w.sub_category_err="Please fill field"}function U(){if(!(S.description.length>=200))return A.value.attributes[2].nodeValue="color: gray;",!0;S.description=S.description.slice(0,200),A.value.attributes[2].nodeValue="color: red;"}function V(){return r.items.find((e=>e.name===S.name.toLowerCase()))}async function P(e){if(x()&&E()&&F()&&q()&&U()){if(V())return a.backend_message="Item already exists",void a.display_error_alert_box();const e=C.value;if(!e.files[0])return a.backend_message="Please upload an image",void a.display_error_alert_box();if("image/png"!=e.files[0].type&&"image/jpeg"!=e.files[0].type&&"image/jpg"!=e.files[0].type)return a.backend_message="Invalid file",void a.display_error_alert_box();if(e.files[0].size>5242880)return a.backend_message="image cannot be larger than 5mb",void a.display_error_alert_box();const o=new FormData;o.append("name",S.name),o.append("price",S.price),o.append("description",S.description),o.append("category",S.category),o.append("sub_category",S.sub_category),o.append("image",e.files[0]),a.toggle_loading_overlay(!0);try{const e=await c.A.upload_items(o);"success"===e.message?(await r.fetch_items(),T(),a.backend_message="Item uploaded successfully",a.display_success_alert_box()):(a.backend_message="Error occurred, please try again",a.display_error_alert_box())}catch(t){a.backend_message="Error occurred, please try again",a.display_error_alert_box()}finally{a.toggle_loading_overlay(!1)}}}function T(){S.name="",S.price="",S.description="",S.category="",C.value.value=null}return(0,t.$u)((()=>{x(),E(),U(),F(),q()})),(e,a)=>((0,t.uX)(),(0,t.CE)("div",u,[(0,t.Lk)("h2",d,[(0,t.RG)(e.$slots,"form-title")]),(0,t.Lk)("form",p,[(0,t.Lk)("div",m,[a[5]||(a[5]=(0,t.Lk)("label",{for:"item-name",class:"form-label"},"Item Name",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",id:"item-name","onUpdate:modelValue":a[0]||(a[0]=e=>(0,o.R1)(S).name=e),class:"form-input",placeholder:"Enter item name",required:""},null,512),[[i.Jo,(0,o.R1)(S).name]]),(0,t.Lk)("p",f,(0,s.v_)((0,o.R1)(w).name_err),1)]),(0,t.Lk)("div",_,[a[6]||(a[6]=(0,t.Lk)("label",{for:"item-price",class:"form-label"},"Item Price",-1)),(0,t.bo)((0,t.Lk)("input",{type:"number","onUpdate:modelValue":a[1]||(a[1]=e=>(0,o.R1)(S).price=e),id:"item-price",class:"form-input",placeholder:"Enter item price",required:""},null,512),[[i.Jo,(0,o.R1)(S).price]]),(0,t.Lk)("p",g,(0,s.v_)((0,o.R1)(w).price_err),1)]),(0,t.Lk)("div",b,[a[7]||(a[7]=(0,t.Lk)("label",{for:"item-description",class:"form-label"},"Item Description",-1)),(0,t.bo)((0,t.Lk)("textarea",{id:"item-description","onUpdate:modelValue":a[2]||(a[2]=e=>(0,o.R1)(S).description=e),class:"form-input",placeholder:"Enter item description",rows:"4",required:""},null,512),[[i.Jo,(0,o.R1)(S).description]]),(0,t.Lk)("p",{class:"err",style:{color:"gray"},ref_key:"description_counter",ref:A},(0,s.v_)((0,o.R1)(S).description.length)+"/200 characters",513)]),(0,t.Lk)("div",y,[a[9]||(a[9]=(0,t.Lk)("label",{for:"item-category",class:"form-label"},"Item Category",-1)),(0,t.bo)((0,t.Lk)("select",{id:"item-category","onUpdate:modelValue":a[3]||(a[3]=e=>(0,o.R1)(S).category=e),class:"form-input",required:""},a[8]||(a[8]=[(0,t.Fv)('<option value="" data-v-3f8f3374>Select Category</option><option value="meals/sides" data-v-3f8f3374>Meals/sides</option><option value="africana" data-v-3f8f3374>Africana Dish</option><option value="drinks" data-v-3f8f3374>Drinks</option><option value="bread" data-v-3f8f3374>Bread</option><option value="cakes" data-v-3f8f3374>Cakes</option><option value="snacks" data-v-3f8f3374>Snacks</option>',7)]),512),[[i.u1,(0,o.R1)(S).category]]),(0,t.Lk)("p",k,(0,s.v_)((0,o.R1)(w).category_err),1)]),"africana"===(0,o.R1)(S).category?((0,t.uX)(),(0,t.CE)("div",v,[a[11]||(a[11]=(0,t.Lk)("label",{for:"item-category",class:"form-label"},"Sub Category",-1)),(0,t.bo)((0,t.Lk)("select",{id:"item-category","onUpdate:modelValue":a[4]||(a[4]=e=>(0,o.R1)(S).sub_category=e),class:"form-input",required:""},a[10]||(a[10]=[(0,t.Lk)("option",{value:""},"Select Sub Category",-1),(0,t.Lk)("option",{value:"swallow"},"Swallow",-1),(0,t.Lk)("option",{value:"soup"},"Soup",-1),(0,t.Lk)("option",{value:"none"},"None",-1)]),512),[[i.u1,(0,o.R1)(S).sub_category]]),(0,t.Lk)("p",L,(0,s.v_)((0,o.R1)(w).sub_category_err),1)])):(0,t.Q3)("",!0),(0,t.Lk)("div",R,[a[12]||(a[12]=(0,t.Lk)("label",{for:"item-image",class:"form-label"},"Upload Item Image",-1)),(0,t.Lk)("input",{type:"file",id:"item-image",class:"form-input",ref_key:"itemImage",ref:C,accept:"image/*",required:""},null,512),(0,t.Lk)("p",h,(0,s.v_)((0,o.R1)(w).image_err.category_err),1)]),(0,t.Lk)("div",I,[(0,t.Lk)("button",{type:"submit",onClick:(0,i.D$)(P,["prevent"]),class:"submit-button"},[(0,t.RG)(e.$slots,"button-title")])])])]))}},C=r(1241);const S=(0,C.A)(A,[["__scopeId","data-v-3f8f3374"]]);var w=S},1461:function(e,a,r){r.r(a),r.d(a,{default:function(){return b}});r(4114);var t=r(6768),o=r(4232),i=r(144),s=r(1380),l=r(1684),n=r(5724),c=r(686),u=r(1556),d=r(8238),p=r(4549),m=r(1387),f={__name:"Items",setup(e){const a=(0,d.j)(),r=(0,p.g)(),f=((0,m.lq)(),(0,m.rd)());return r.admin_isAuthenticated||f.push({path:"/login"}),(0,t.wB)((()=>r.admin_isAuthenticated),(e=>{e||(a.backend_message="session expired",a.display_success_alert_box(!0),setTimeout((()=>{f.push({path:"/login"})}),1e3))})),(e,r)=>{const d=(0,t.g2)("SUCCESSALERTBOX"),p=(0,t.g2)("ERRORALERTBOX");return(0,t.uX)(),(0,t.CE)("div",{class:"container",style:(0,o.Tr)((0,i.R1)(a).container_css)},[(0,t.bF)(c.A),(0,t.bF)(d,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)((0,i.R1)(a).backend_message),1)])),_:1}),(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,o.v_)((0,i.R1)(a).backend_message),1)])),_:1}),(0,t.bF)(u.A),(0,t.Lk)("div",{class:"sub_container",style:(0,o.Tr)((0,i.R1)(a).sub_container_css)},[(0,t.bF)(s.A,{page_name:"customers",searchbox_placeholder:"Enter Item Name To Search"}),r[2]||(r[2]=(0,t.Lk)("h1",null,"Items",-1)),(0,t.bF)(l.A),(0,t.bF)(n.A,null,{"form-title":(0,t.k6)((()=>r[0]||(r[0]=[(0,t.eW)(" Add New Item ")]))),"button-title":(0,t.k6)((()=>r[1]||(r[1]=[(0,t.eW)(" Add Item ")]))),_:1})],4)],4)}}},_=r(1241);const g=(0,_.A)(f,[["__scopeId","data-v-6863625f"]]);var b=g}}]);
//# sourceMappingURL=417.fb716484.js.map